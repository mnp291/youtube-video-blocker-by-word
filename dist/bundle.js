!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;t.Storage=class{constructor(){var e;this.storage=chrome.storage,this.subs=new Set,null===(e=this.storage)||void 0===e||e.onChanged.addListener(e=>{this.subsTrigger(e)})}getKeywordList(){return new Promise(e=>{var t;this.storage||e([]),null===(t=this.storage)||void 0===t||t.local.get(["blocker_keyword_list"],t=>{const o=t.blocker_keyword_list||[];e(o.map(e=>e.trim()))})})}addKeyWord(e){return new Promise(t=>{var o;""!==e.trim()?e.replace(/\s+/,"").length<3?t():null===(o=this.storage)||void 0===o||o.local.get(["blocker_keyword_list"],o=>{var r;const n=o.blocker_keyword_list||[];n.push(e.toLowerCase().trim()),null===(r=this.storage)||void 0===r||r.local.set({blocker_keyword_list:[...new Set(n)]},()=>{t()})}):t()})}getCounter(){return new Promise(e=>{var t;this.storage||e(0),null===(t=this.storage)||void 0===t||t.local.get(["blocker_counter"],t=>{const o=parseInt(t.blocker_counter||0,10);e(o)})})}setCounter(e){return new Promise(t=>{var o;null===(o=this.storage)||void 0===o||o.local.set({blocker_counter:e},()=>{t()})})}removeKeyWord(e){return new Promise(t=>{this.getKeywordList().then(o=>{var r;const n=o.filter(t=>t!==e.toLowerCase());null===(r=this.storage)||void 0===r||r.local.set({blocker_keyword_list:n},()=>{t()})})})}subsTrigger(e){for(const t of this.subs)t(e)}onChange(e){this.subs.add(e)}}},,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(4),n=o(0);new r.Observer(new n.Storage).run()},function(e,t,o){"use strict";var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function l(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0;t.Observer=class{constructor(e){this.storage=e,this.blockedCards=new Set,e.setCounter(0),this.storage.onChange(e=>{e.blocker_keyword_list&&this.blockCards(document.querySelectorAll("div, span, a"))})}run(){return r(this,void 0,void 0,(function*(){this.blockCards(document.querySelectorAll("div, span, a"));new MutationObserver(e=>{for(const t of e)this.blockCards(t.addedNodes)}).observe(document,{attributes:!0,childList:!0,subtree:!0})}))}blockCards(e){return r(this,void 0,void 0,(function*(){e.forEach(e=>r(this,void 0,void 0,(function*(){var t;if(e instanceof HTMLElement&&!(null===(t=this.blockedCards)||void 0===t?void 0:t.has(e))){const t=yield this.storage.getKeywordList();for(const o of t)if(-1!==e.innerText.replace(/\s+/," ").toLowerCase().indexOf(o)){this.blockCard(e,o);break}}})))}))}blockCard(e,t){var o;return r(this,void 0,void 0,(function*(){if(this.blockedCards.has(e))return;const r=e.closest('[id="dismissable"], .ytd-section-list-renderer > #contents  [class*="item"] > *'),n=null==r?void 0:r.parentElement;if(e.closest(".youtube-blocked-item")||(null===(o=null==r?void 0:r.previousElementSibling)||void 0===o?void 0:o.classList.contains("youtube-blocked-item")))return;if(!(r instanceof HTMLElement&&n instanceof HTMLElement))return;n.style.position="relative";n.innerHTML+=`<div class="youtube-blocked-item" style="\n            justify-content: center; \n            align-items: center;\n            text-align: center;\n            display: flex;\n            position: absolute;\n            background-color: gray;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n        ">\n            <h4 style="font-size: 21px; color: white;">\n                Заблокированно: <b>${t}</b>\n            </h4>\n        </div>\n        `,this.blockedCards.add(e),this.storage.setCounter(document.querySelectorAll(".youtube-blocked-item").length)}))}}}]);
//# sourceMappingURL=bundle.js.map